import{b as mt}from"./chunk-L4TUT3AY.js";import{a as P}from"./chunk-YCGNBCQP.js";import{a as A,b as _e,d as Le,f as Be,g as gt}from"./chunk-HLLNBHXJ.js";import{a as Mt,b as Te,c as xe,d as wt,e as jt,f as be,g as Y,i as Oe}from"./chunk-FMI3ASGX.js";import{a as Ie,b as lt,c as Ae,d as Re}from"./chunk-3SRKVDQM.js";import{A as Ce,C as Nt,D as dt,E as Me,F as we,G as je,H as Ne,I as De,J as Pe,K as Dt,L as pt,M as ke,N as F,O as Ue,P as ze,S as $e,T as nt,U as ht,x as Fe,y as V,z as $}from"./chunk-K2P4NQMX.js";import{$ as ct,A as Z,B as M,Ba as me,D as L,E as oe,F as se,Fc as Q,G as ae,Ga as ge,I as z,J as ce,K as ue,M as at,Mb as ye,P as Ct,S as fe,V as le,W as de,Y as pe,_ as x,a as I,aa as ut,b as C,ba as rt,e as et,fa as O,h as Yt,ia as R,j as te,ja as S,k as ee,ka as c,l as re,la as X,m as ne,ma as ft,o as H,ob as Ee,s as ie,t as y,v as K,wb as Se,xa as W,xc as ve,za as he}from"./chunk-ATHMOBVU.js";var ot="PERFORM_ACTION",Jr="REFRESH",We="RESET",Qe="ROLLBACK",Ye="COMMIT",tr="SWEEP",er="TOGGLE_ACTION",Zr="SET_ACTIONS_ACTIVE",rr="JUMP_TO_STATE",nr="JUMP_TO_ACTION",qt="IMPORT_STATE",ir="LOCK_CHANGES",or="PAUSE_RECORDING",tt=class{constructor(e,i){if(this.action=e,this.timestamp=i,this.type=ot,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Pt=class{constructor(){this.type=Jr}},kt=class{constructor(e){this.timestamp=e,this.type=We}},Ut=class{constructor(e){this.timestamp=e,this.type=Qe}},zt=class{constructor(e){this.timestamp=e,this.type=Ye}},$t=class{constructor(){this.type=tr}},_t=class{constructor(e){this.id=e,this.type=er}};var Lt=class{constructor(e){this.index=e,this.type=rr}},Bt=class{constructor(e){this.actionId=e,this.type=nr}},Gt=class{constructor(e){this.nextLiftedState=e,this.type=qt}},Ht=class{constructor(e){this.status=e,this.type=ir}},Vt=class{constructor(e){this.status=e,this.type=or}};var vt=new R("@ngrx/store-devtools Options"),Ge=new R("@ngrx/store-devtools Initial Config");function sr(){return null}var Xr="NgRx Store DevTools";function Wr(t){let e={maxAge:!1,monitor:sr,actionSanitizer:void 0,stateSanitizer:void 0,name:Xr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},i=typeof t=="function"?t():t,r=i.logOnly?{pause:!0,export:!0,test:!0}:!1,n=i.features||r||e.features;n.import===!0&&(n.import="custom");let o=Object.assign({},e,{features:n},i);if(o.maxAge&&o.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${o.maxAge}`);return o}function He(t,e){return t.filter(i=>e.indexOf(i)<0)}function ar(t){let{computedStates:e,currentStateIndex:i}=t;if(i>=e.length){let{state:n}=e[e.length-1];return n}let{state:r}=e[i];return r}function it(t){return new tt(t,+Date.now())}function Qr(t,e){return Object.keys(e).reduce((i,r)=>{let n=Number(r);return i[n]=cr(t,e[n],n),i},{})}function cr(t,e,i){return C(I({},e),{action:t(e.action,i)})}function Yr(t,e){return e.map((i,r)=>({state:ur(t,i.state,r),error:i.error}))}function ur(t,e,i){return t(e,i)}function fr(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function tn(t,e,i,r){let n=[],o={},a=[];return t.stagedActionIds.forEach((f,E)=>{let d=t.actionsById[f];d&&(E&&Jt(t.computedStates[E],d,e,i,r)||(o[f]=d,n.push(f),a.push(t.computedStates[E])))}),C(I({},t),{stagedActionIds:n,actionsById:o,computedStates:a})}function Jt(t,e,i,r,n){let o=i&&!i(t,e.action),a=r&&!e.action.type.match(r.map(E=>Ve(E)).join("|")),f=n&&e.action.type.match(n.map(E=>Ve(E)).join("|"));return o||a||f}function Ve(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lr(t){return{ngZone:t?c(Se):null,connectInZone:t}}var It=(()=>{let e=class e extends dt{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ge(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Et={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Kt=new R("@ngrx/store-devtools Redux Devtools Extension"),dr=(()=>{let e=class e{constructor(r,n,o){this.config=n,this.dispatcher=o,this.zoneConfig=lr(this.config.connectInZone),this.devtoolsExtension=r,this.createActionStreams()}notify(r,n){if(this.devtoolsExtension)if(r.type===ot){if(n.isLocked||n.isPaused)return;let o=ar(n);if(fr(this.config)&&Jt(o,r,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let a=this.config.stateSanitizer?ur(this.config.stateSanitizer,o,n.currentStateIndex):o,f=this.config.actionSanitizer?cr(this.config.actionSanitizer,r,n.nextActionId):r;this.sendToReduxDevtools(()=>this.extensionConnection.send(f,a))}else{let o=C(I({},n),{stagedActionIds:n.stagedActionIds,actionsById:this.config.actionSanitizer?Qr(this.config.actionSanitizer,n.actionsById):n.actionsById,computedStates:this.config.stateSanitizer?Yr(this.config.stateSanitizer,n.computedStates):n.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new et(r=>{let n=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=n,n.init(),n.subscribe(o=>r.next(o)),n.unsubscribe}):re}createActionStreams(){let r=this.createChangesObservable().pipe(de()),n=r.pipe(M(u=>u.type===Et.START)),o=r.pipe(M(u=>u.type===Et.STOP)),a=r.pipe(M(u=>u.type===Et.DISPATCH),y(u=>this.unwrapAction(u.payload)),se(u=>u.type===qt?this.dispatcher.pipe(M(s=>s.type===Dt),ie(1e3),ae(1e3),y(()=>u),L(()=>H(u)),z(1)):H(u))),E=r.pipe(M(u=>u.type===Et.ACTION),y(u=>this.unwrapAction(u.payload))).pipe(ct(o)),d=a.pipe(ct(o));this.start$=n.pipe(ct(o)),this.actions$=this.start$.pipe(x(()=>E)),this.liftedActions$=this.start$.pipe(x(()=>d))}unwrapAction(r){return typeof r=="string"?(0,eval)(`(${r})`):r}getExtensionConfig(r){let n={name:r.name,features:r.features,serialize:r.serialize,autoPause:r.autoPause??!1,trace:r.trace??!1,traceLimit:r.traceLimit??75};return r.maxAge!==!1&&(n.maxAge=r.maxAge),n}sendToReduxDevtools(r){try{r()}catch(n){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",n)}}};e.\u0275fac=function(n){return new(n||e)(S(Kt),S(vt),S(It))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),yt={type:Nt},en="@ngrx/store-devtools/recompute",rn={type:en};function pr(t,e,i,r,n){if(r)return{state:i,error:"Interrupted by an error up the chain"};let o=i,a;try{o=t(i,e)}catch(f){a=f.toString(),n.handleError(f)}return{state:o,error:a}}function St(t,e,i,r,n,o,a,f,E){if(e>=t.length&&t.length===o.length)return t;let d=t.slice(0,e),u=o.length-(E?1:0);for(let s=e;s<u;s++){let h=o[s],T=n[h].action,p=d[s-1],l=p?p.state:r,k=p?p.error:void 0,U=a.indexOf(h)>-1?p:pr(i,T,l,k,f);d.push(U)}return E&&d.push(t[t.length-1]),d}function nn(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:it(yt)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function on(t,e,i,r,n={}){return o=>(a,f)=>{let{monitorState:E,actionsById:d,nextActionId:u,stagedActionIds:s,skippedActionIds:h,committedState:T,currentStateIndex:p,computedStates:l,isLocked:k,isPaused:b}=a||e;a||(d=Object.create(d));function U(v){let g=v,G=s.slice(1,g+1);for(let D=0;D<G.length;D++)if(l[D+1].error){g=D,G=s.slice(1,g+1);break}else delete d[G[D]];h=h.filter(D=>G.indexOf(D)===-1),s=[0,...s.slice(g+1)],T=l[g].state,l=l.slice(g),p=p>g?p-g:0}function J(){d={0:it(yt)},u=1,s=[0],h=[],T=l[p].state,p=0,l=[]}let m=0;switch(f.type){case ir:{k=f.status,m=1/0;break}case or:{b=f.status,b?(s=[...s,u],d[u]=new tt({type:"@ngrx/devtools/pause"},+Date.now()),u++,m=s.length-1,l=l.concat(l[l.length-1]),p===s.length-2&&p++,m=1/0):J();break}case We:{d={0:it(yt)},u=1,s=[0],h=[],T=t,p=0,l=[];break}case Ye:{J();break}case Qe:{d={0:it(yt)},u=1,s=[0],h=[],p=0,l=[];break}case er:{let{id:v}=f;h.indexOf(v)===-1?h=[v,...h]:h=h.filter(G=>G!==v),m=s.indexOf(v);break}case Zr:{let{start:v,end:g,active:G}=f,D=[];for(let Ft=v;Ft<g;Ft++)D.push(Ft);G?h=He(h,D):h=[...h,...D],m=s.indexOf(v);break}case rr:{p=f.index,m=1/0;break}case nr:{let v=s.indexOf(f.actionId);v!==-1&&(p=v),m=1/0;break}case tr:{s=He(s,h),h=[],p=Math.min(p,s.length-1);break}case ot:{if(k)return a||e;if(b||a&&Jt(a.computedStates[p],f,n.predicate,n.actionsSafelist,n.actionsBlocklist)){let g=l[l.length-1];l=[...l.slice(0,-1),pr(o,f.action,g.state,g.error,i)],m=1/0;break}n.maxAge&&s.length===n.maxAge&&U(1),p===s.length-1&&p++;let v=u++;d[v]=f,s=[...s,v],m=s.length-1;break}case qt:{({monitorState:E,actionsById:d,nextActionId:u,stagedActionIds:s,skippedActionIds:h,committedState:T,currentStateIndex:p,computedStates:l,isLocked:k,isPaused:b}=f.nextLiftedState);break}case Nt:{m=0,n.maxAge&&s.length>n.maxAge&&(l=St(l,m,o,T,d,s,h,i,b),U(s.length-n.maxAge),m=1/0);break}case Dt:{if(l.filter(g=>g.error).length>0)m=0,n.maxAge&&s.length>n.maxAge&&(l=St(l,m,o,T,d,s,h,i,b),U(s.length-n.maxAge),m=1/0);else{if(!b&&!k){p===s.length-1&&p++;let g=u++;d[g]=new tt(f,+Date.now()),s=[...s,g],m=s.length-1,l=St(l,m,o,T,d,s,h,i,b)}l=l.map(g=>C(I({},g),{state:o(g.state,rn)})),p=s.length-1,n.maxAge&&s.length>n.maxAge&&U(s.length-n.maxAge),m=1/0}break}default:{m=1/0;break}}return l=St(l,m,o,T,d,s,h,i,b),E=r(E,f),{monitorState:E,actionsById:d,nextActionId:u,stagedActionIds:s,skippedActionIds:h,committedState:T,currentStateIndex:p,computedStates:l,isLocked:k,isPaused:b}}}var Ke=(()=>{let e=class e{constructor(r,n,o,a,f,E,d,u){let s=nn(d,u.monitor),h=on(d,s,E,u.monitor,u),T=Z(Z(n.asObservable().pipe(pe(1)),a.actions$).pipe(y(it)),r,a.liftedActions$).pipe(ne(ee)),p=o.pipe(y(h)),l=lr(u.connectInZone),k=new te(1);this.liftedStateSubscription=T.pipe(rt(p),qe(l),le(({state:J},[m,v])=>{let g=v(J,m);return m.type!==ot&&fr(u)&&(g=tn(g,u.predicate,u.actionsSafelist,u.actionsBlocklist)),a.notify(m,g),{state:g,action:m}},{state:s,action:null})).subscribe(({state:J,action:m})=>{if(k.next(J),m.type===ot){let v=m.action;f.next(v)}}),this.extensionStartSubscription=a.start$.pipe(qe(l)).subscribe(()=>{this.refresh()});let b=k.asObservable(),U=b.pipe(y(ar));Object.defineProperty(U,"state",{value:Fe(U,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=r,this.liftedState=b,this.state=U}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(r){this.dispatcher.next(r)}next(r){this.dispatcher.next(r)}error(r){}complete(){}performAction(r){this.dispatch(new tt(r,+Date.now()))}refresh(){this.dispatch(new Pt)}reset(){this.dispatch(new kt(+Date.now()))}rollback(){this.dispatch(new Ut(+Date.now()))}commit(){this.dispatch(new zt(+Date.now()))}sweep(){this.dispatch(new $t)}toggleAction(r){this.dispatch(new _t(r))}jumpToAction(r){this.dispatch(new Bt(r))}jumpToState(r){this.dispatch(new Lt(r))}importState(r){this.dispatch(new Gt(r))}lockChanges(r){this.dispatch(new Ht(r))}pauseRecording(r){this.dispatch(new Vt(r))}};e.\u0275fac=function(n){return new(n||e)(S(It),S(dt),S(De),S(dr),S(pt),S(W),S(Me),S(vt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function qe({ngZone:t,connectInZone:e}){return i=>e?new et(r=>i.subscribe({next:n=>t.run(()=>r.next(n)),error:n=>t.run(()=>r.error(n)),complete:()=>t.run(()=>r.complete())})):i}var sn=new R("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function an(t,e){return!!t||e.monitor!==sr}function cn(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function un(t){return t.state}function hr(t={}){return X([dr,It,Ke,{provide:Ge,useValue:t},{provide:sn,deps:[Kt,vt],useFactory:an},{provide:Kt,useFactory:cn},{provide:vt,deps:[Ge],useFactory:Wr},{provide:ke,deps:[Ke],useFactory:un},{provide:Pe,useExisting:It}])}var Zt=()=>{let t=c(F),e=c(Y);return t.select(mt).pipe(z(1),y(i=>!!i||e.createUrlTree(["/","auth"])))};var mr=[{path:"",loadComponent:()=>import("./chunk-FHFJGLNM.js").then(t=>t.Shell),children:[{path:"auth",loadChildren:()=>import("./chunk-ACZBOU64.js").then(t=>t.routes)},{path:"dashboard",canActivate:[Zt],loadChildren:()=>import("./chunk-R6AT6AII.js").then(t=>t.routes)},{path:"graph",loadChildren:()=>import("./chunk-KUVWZKTQ.js").then(t=>t.routes)},{path:"flashcard",canActivate:[Zt],loadChildren:()=>import("./chunk-7DZUN3T5.js").then(t=>t.routes)},{path:"**",redirectTo:"auth",pathMatch:"full"}]},{path:"**",redirectTo:"auth",pathMatch:"full"}];var fn={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},At="__@ngrx/effects_create__";function w(t,e={}){let i=e.functional?t:t(),r=I(I({},fn),e);return Object.defineProperty(i,At,{value:r}),i}function ln(t){return Object.getOwnPropertyNames(t).filter(r=>t[r]&&t[r].hasOwnProperty(At)?t[r][At].hasOwnProperty("dispatch"):!1).map(r=>{let n=t[r][At];return I({propertyName:r},n)})}function dn(t){return ln(t)}function gr(t){return Object.getPrototypeOf(t)}function pn(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Er(t){return typeof t=="function"}function hn(t){return t.filter(Er)}function mn(t,e,i){let r=gr(t),o=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,a=dn(t).map(({propertyName:f,dispatch:E,useEffectsErrorHandler:d})=>{let u=typeof t[f]=="function"?t[f]():t[f],s=d?i(u,e):u;return E===!1?s.pipe(ce()):s.pipe(fe()).pipe(y(T=>({effect:t[f],notification:T,propertyName:f,sourceName:o,sourceInstance:t})))});return Z(...a)}var gn=10;function Sr(t,e,i=gn){return t.pipe(L(r=>(e&&e.handleError(r),i<=1?t:Sr(t,e,i-1))))}var j=(()=>{let e=class e extends et{constructor(r){super(),r&&(this.source=r)}lift(r){let n=new e;return n.source=this,n.operator=r,n}};e.\u0275fac=function(n){return new(n||e)(S(pt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function N(...t){return M(e=>t.some(i=>typeof i=="string"?i===e.type:i.type===e.type))}var gi=new R("@ngrx/effects Internal Root Guard"),Ei=new R("@ngrx/effects User Provided Effects"),Si=new R("@ngrx/effects Internal Root Effects"),yi=new R("@ngrx/effects Internal Root Effects Instances"),vi=new R("@ngrx/effects Internal Feature Effects"),Ii=new R("@ngrx/effects Internal Feature Effects Instance Groups"),En=new R("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Sr}),Sn="@ngrx/effects/init",yn=V(Sn);function vn(t,e){if(t.notification.kind==="N"){let i=t.notification.value;!In(i)&&e.handleError(new Error(`Effect ${An(t)} dispatched an invalid action: ${Rn(i)}`))}}function In(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function An({propertyName:t,sourceInstance:e,sourceName:i}){let r=typeof e[t]=="function";return!!i?`"${i}.${String(t)}${r?"()":""}"`:`"${String(t)}()"`}function Rn(t){try{return JSON.stringify(t)}catch{return t}}var Tn="ngrxOnIdentifyEffects";function xn(t){return Xt(t,Tn)}var bn="ngrxOnRunEffects";function On(t){return Xt(t,bn)}var Fn="ngrxOnInitEffects";function Cn(t){return Xt(t,Fn)}function Xt(t,e){return t&&e in t&&typeof t[e]=="function"}var yr=(()=>{let e=class e extends Yt{constructor(r,n){super(),this.errorHandler=r,this.effectsErrorHandler=n}addEffects(r){this.next(r)}toActions(){return this.pipe(Ct(r=>pn(r)?gr(r):r),K(r=>r.pipe(Ct(Mn))),K(r=>{let n=r.pipe(at(a=>wn(this.errorHandler,this.effectsErrorHandler)(a)),y(a=>(vn(a,this.errorHandler),a.notification)),M(a=>a.kind==="N"&&a.value!=null),ue()),o=r.pipe(z(1),M(Cn),y(a=>a.ngrxOnInitEffects()));return Z(n,o)}))}};e.\u0275fac=function(n){return new(n||e)(S(W),S(En))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Mn(t){return xn(t)?t.ngrxOnIdentifyEffects():""}function wn(t,e){return i=>{let r=mn(i,t,e);return On(i)?i.ngrxOnRunEffects(r):r}}var jn=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(r,n){this.effectSources=r,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(n){return new(n||e)(S(yr),S(F))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vr(...t){let e=t.flat(),i=hn(e);return X([i,ft(()=>{c(je),c(Ne,{optional:!0});let r=c(jn),n=c(yr),o=!r.isStarted;o&&r.start();for(let a of e){let f=Er(a)?c(a):a;n.addEffects(f)}o&&c(F).dispatch(yn())})])}var Tr="@ngrx/router-store/request",Di=V(Tr,$()),xr="@ngrx/router-store/navigation",Pi=V(xr,$()),br="@ngrx/router-store/cancel",ki=V(br,$()),Or="@ngrx/router-store/error",Ui=V(Or,$()),Fr="@ngrx/router-store/navigated",zi=V(Fr,$());var Rt=class{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){let i=e.children.map(r=>this.serializeRoute(r));return{params:e.params,data:e.data,url:e.url,outlet:e.outlet,title:e.title,routeConfig:e.routeConfig?{path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet,title:typeof e.routeConfig.title=="string"?e.routeConfig.title:void 0}:null,queryParams:e.queryParams,fragment:e.fragment,firstChild:i[0],children:i}}},Wt=function(t){return t[t.PreActivation=1]="PreActivation",t[t.PostActivation=2]="PostActivation",t}(Wt||{}),Nn="router",Ir=new R("@ngrx/router-store Internal Configuration"),Cr=new R("@ngrx/router-store Configuration"),Qt=function(t){return t[t.Full=0]="Full",t[t.Minimal=1]="Minimal",t}(Qt||{});function Dn(t){return I({stateKey:Nn,serializer:Rt,navigationActionTiming:Wt.PreActivation},t)}var Tt=class{serialize(e){return{root:this.serializeRoute(e.root),url:e.url}}serializeRoute(e){let i=e.children.map(r=>this.serializeRoute(r));return{params:e.params,paramMap:e.paramMap,data:e.data,url:e.url,outlet:e.outlet,title:e.title,routeConfig:e.routeConfig?{component:e.routeConfig.component,path:e.routeConfig.path,pathMatch:e.routeConfig.pathMatch,redirectTo:e.routeConfig.redirectTo,outlet:e.routeConfig.outlet,title:e.routeConfig.title}:null,queryParams:e.queryParams,queryParamMap:e.queryParamMap,fragment:e.fragment,component:e.routeConfig?e.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:i[0],pathFromRoot:void 0,children:i}}},xt=class{},_=function(t){return t[t.NONE=1]="NONE",t[t.ROUTER=2]="ROUTER",t[t.STORE=3]="STORE",t}(_||{}),Ar=(()=>{let e=class e{constructor(r,n,o,a,f,E){this.store=r,this.router=n,this.serializer=o,this.errorHandler=a,this.config=f,this.activeRuntimeChecks=E,this.lastEvent=null,this.routerState=null,this.trigger=_.NONE,this.stateKey=this.config.stateKey,!ze()&&Q()&&(E?.strictActionSerializability||E?.strictStateSerializability)&&this.serializer instanceof Tt&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(Ue(this.stateKey),rt(this.store)).subscribe(([r,n])=>{this.navigateIfNeeded(r,n)})}navigateIfNeeded(r,n){if(!r||!r.state||this.trigger===_.ROUTER||this.lastEvent instanceof Mt)return;let o=r.state.url;Pn(this.router.url,o)||(this.storeState=n,this.trigger=_.STORE,this.router.navigateByUrl(o).catch(a=>{this.errorHandler.handleError(a)}))}setUpRouterEventsListener(){let r=this.config.navigationActionTiming===Wt.PostActivation,n;this.router.events.pipe(rt(this.store)).subscribe(([o,a])=>{this.lastEvent=o,o instanceof Mt?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==_.STORE&&(this.storeState=a,this.dispatchRouterRequest(o))):o instanceof jt?(n=o,!r&&this.trigger!==_.STORE&&this.dispatchRouterNavigation(o)):o instanceof xe?(this.dispatchRouterCancel(o),this.reset()):o instanceof wt?(this.dispatchRouterError(o),this.reset()):o instanceof Te&&(this.trigger!==_.STORE&&(r&&this.dispatchRouterNavigation(n),this.dispatchRouterNavigated(o)),this.reset())})}dispatchRouterRequest(r){this.dispatchRouterAction(Tr,{event:r})}dispatchRouterNavigation(r){let n=this.serializer.serialize(r.state);this.dispatchRouterAction(xr,{routerState:n,event:new jt(r.id,r.url,r.urlAfterRedirects,n)})}dispatchRouterCancel(r){this.dispatchRouterAction(br,{storeState:this.storeState,event:r})}dispatchRouterError(r){this.dispatchRouterAction(Or,{storeState:this.storeState,event:new wt(r.id,r.url,`${r}`)})}dispatchRouterNavigated(r){let n=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(Fr,{event:r,routerState:n})}dispatchRouterAction(r,n){this.trigger=_.ROUTER;try{this.store.dispatch({type:r,payload:C(I({routerState:this.routerState},n),{event:this.config.routerState===Qt.Full?n.event:{id:n.event.id,url:n.event.url,urlAfterRedirects:n.event.urlAfterRedirects}})})}finally{this.trigger=_.NONE}}reset(){this.trigger=_.NONE,this.storeState=null,this.routerState=null}};e.\u0275fac=function(n){return new(n||e)(S(F),S(Y),S(xt),S(W),S(Cr),S(we))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function Pn(t,e){return Rr(t)===Rr(e)}function Rr(t){return t?.length>0&&t[t.length-1]==="/"?t.substring(0,t.length-1):t}function Mr(t={}){return X([{provide:Ir,useValue:t},{provide:Cr,useFactory:Dn,deps:[Ir]},{provide:xt,useClass:t.serializer?t.serializer:t.routerState===Qt.Full?Tt:Rt},ft(()=>c(Ar)),Ar])}var kn={access_token:null,current:null},wr=ht(kn,nt(P.setCurrentUser,(t,{jwt:e})=>C(I({},t),{current:e})),nt(P.loginSuccess,(t,{data:e})=>C(I({},t),{access_token:e.access_token})));var jr=Ce({source:"Actor",events:{"Load Actor Profile":$(),"Load Actor Profile Success":$(),"Load Actor Profile Failure":$()}});var Un={current:null,error:null},Nr=ht(Un,nt(jr.loadActorProfileFailure,(t,{error:e})=>C(I({},t),{error:e})));var Dr={auth:wr,actors:Nr,flashcards:Be,models:_e},so=Q()?[]:[];var bt=class t{http=c(lt);baseUrl="/api";login(e,i){return this.http.post(`${this.baseUrl}/auth/login`,{username:e,password:i})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var q=class extends Error{};q.prototype.name="InvalidTokenError";function zn(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,i)=>{let r=i.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function $n(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return zn(e)}catch{return atob(e)}}function Pr(t,e){if(typeof t!="string")throw new q("Invalid token specified: must be a string");e||(e={});let i=e.header===!0?0:1,r=t.split(".")[i];if(typeof r!="string")throw new q(`Invalid token specified: missing part #${i+1}`);let n;try{n=$n(r)}catch(o){throw new q(`Invalid token specified: invalid base64 for part #${i+1} (${o.message})`)}try{return JSON.parse(n)}catch(o){throw new q(`Invalid token specified: invalid json for part #${i+1} (${o.message})`)}}var kr=w((t=c(j),e=c(bt))=>t.pipe(N(P.createSession),at(({username:i,password:r})=>e.login(i,r).pipe(y(n=>P.loginSuccess({data:n})),L(n=>H(P.loginFailure({error:n})))))),{functional:!0}),Ur=w((t=c(j),e=c(Y),i=c(F))=>t.pipe(N(P.loginSuccess),y(({data:{access_token:r}})=>Pr(r)),x(r=>[P.setCurrentUser({jwt:r})]),ut(()=>e.navigate(["/","dashboard"]))),{functional:!0,dispatch:!0});var B=class t{http=c(lt);baseUrl="/api";getFlashcardsByUsername(e){return this.http.get(`${this.baseUrl}/actors/${e}/flashcards?perPage=25`)}getFlashcardById(e){return this.http.get(e)}getModelById(e){return this.http.get(e)}createModel(e){return this.http.post(`${this.baseUrl}/edu/flashcard-models`,e)}createFlashcard(e,i){return this.http.post(`${this.baseUrl}/edu/flashcards/${i}`,e)}getAllModels(){return this.http.get(`${this.baseUrl}/edu/flashcard-models`)}addFlashcardToReview(e){return console.log("addFlashToReview",e),this.http.post(`${this.baseUrl}/srs/review`,{flashcardActivityPubId:e.id,rating:1})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var zr=w((t=c(j))=>t.pipe(N(P.setCurrentUser),y(({jwt:e})=>A.loadFlashcards({username:e.username}))),{functional:!0}),$r=w((t=c(j),e=c(B))=>t.pipe(N(A.loadFlashcards),x(({username:i})=>e.getFlashcardsByUsername(i)),x(i=>i.orderedItems.map(r=>A.loadFlashcard({activityPubId:r})))),{functional:!0,dispatch:!0}),_r=w((t=c(j),e=c(B))=>t.pipe(N(A.loadFlashcard),K(({activityPubId:i})=>e.getFlashcardById(i).pipe(y(r=>A.loadFlashcardSuccess({data:r})),L(r=>[A.loadModelFailure({error:r})])))),{functional:!0,dispatch:!0}),Lr=w((t=c(j),e=c(F),i=c(B))=>t.pipe(N(A.loadFlashcardSuccess),x(r=>e.select(Le(r.data["edu:model"])).pipe(z(1),oe(H(r)))),M(([r])=>!r),x(([r,{data:n}])=>i.getModelById(n["edu:model"]).pipe(y(o=>A.loadModelSuccess({data:o})),L(o=>(console.error(o),H(A.loadModelFailure({error:o}))))))),{functional:!0,dispatch:!0}),Br=w((t=c(j),e=c(B))=>t.pipe(N(A.createModel),x(({model:i})=>e.createModel(i)),y(({activityPubId:i})=>A.loadModel({activityPubId:i}))),{functional:!0,dispatch:!0}),Gr=w((t=c(j),e=c(B))=>t.pipe(N(A.loadModels),x(()=>e.getAllModels()),x(i=>i.map(r=>A.loadModelSuccess({data:r})))),{functional:!0,dispatch:!0}),Hr=w((t=c(j),e=c(B))=>t.pipe(N(A.createFlashcard),x(({flashcard:i,username:r})=>e.createFlashcard(i,r)),y(({activityPubId:i})=>A.loadFlashcard({activityPubId:i}))),{functional:!0,dispatch:!0}),Vr=w((t=c(j),e=c(gt))=>t.pipe(N(A.addToReview),ut(i=>console.log("addFlashcardToReviewEffect",i)),x(({flashcard:i})=>e.addToReview({flashcardActivityPubId:i.id}))),{functional:!0,dispatch:!1});var Kr=(t,e)=>c(F).select(mt).pipe(z(1),K(r=>e(t.clone({setHeaders:r?{Authorization:`Bearer ${r}`}:{}}))));var qr={providers:[gt,he(),ve(),Ae(Re([Kr])),Oe(mr),$e(Dr),vr({loginEffect:kr,loginSuccessEffect:Ur,initFlashcardsEffect:zr,loadFlashcardsEffect:$r,loadFlashcardEffect:_r,loadModelEffect:Lr,loadModelsEffect:Gr,createModelEffect:Br,createFlashcardEffect:Hr,addFlashcardToReviewEffect:Vr}),Mr(),hr({maxAge:25,logOnly:!Q(),autoPause:!0,trace:!1,traceLimit:75})]};var Ot=class t{title=me("frontend");static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ee({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&ye(0,"router-outlet")},dependencies:[be],encapsulation:2})};Ie(Ot,qr).catch(t=>console.error(t));
