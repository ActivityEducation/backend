import{b as Ue,c as R,d as I,e as T,f as Le,g as ze,k as _e,l as K,m as $e,o as He,p as Ke}from"./chunk-H25ODVO6.js";import{a as De,b as at}from"./chunk-CEXDVGOK.js";import{a as _}from"./chunk-3VCYTORN.js";import{a as qe,b as Je,c as Ve,d as Y,e as Ct,f as Ze,i as Xe,j as We,k as ct}from"./chunk-QBJ4E5KG.js";import{a as Rt,b as Ae,c as ve,d as It,e as Tt,f as xe,g as Z,i as Re,j as Ie}from"./chunk-TGHDHYJU.js";import{b as Be,d as Ge}from"./chunk-WJ6VB3GZ.js";import{a as d}from"./chunk-XG3JPJ5H.js";import{a as ge}from"./chunk-Q3SQMJOY.js";import{a as Se,b as Ee,c as ye}from"./chunk-3ML6LPQE.js";import{$ as b,Ad as x,B as xt,Ba as ue,Bd as Ne,C as N,Cd as ke,E as z,F as Yt,Fa as de,Fc as V,Fd as je,G as te,Gd as Q,H as ee,Hd as st,J as B,Jb as he,N as re,O as oe,W as ie,X as ne,Z as se,aa as rt,ba as ae,c as vt,ca as k,fa as G,h as qt,i as Jt,ia as H,ja as v,k as Vt,ka as a,kd as Te,l as Zt,la as ot,ld as X,ma as ce,md as U,n as M,nb as pe,nd as Oe,pd as Ot,qd as nt,r as Xt,rd as be,s as E,sd as Ce,t as Wt,u as Qt,ub as fe,vd as we,wd as Fe,xa as it,xc as me,xd as bt,yd as Me,za as le,zd as Pe}from"./chunk-BDC5ZKWJ.js";import{a as w,b as F}from"./chunk-2NFLSA4Y.js";var et="PERFORM_ACTION",Qr="REFRESH",or="RESET",ir="ROLLBACK",nr="COMMIT",sr="SWEEP",ar="TOGGLE_ACTION",Yr="SET_ACTIONS_ACTIVE",cr="JUMP_TO_STATE",lr="JUMP_TO_ACTION",Bt="IMPORT_STATE",ur="LOCK_CHANGES",dr="PAUSE_RECORDING",W=class{constructor(t,i){if(this.action=t,this.timestamp=i,this.type=et,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},wt=class{constructor(){this.type=Qr}},Ft=class{constructor(t){this.timestamp=t,this.type=or}},Mt=class{constructor(t){this.timestamp=t,this.type=ir}},Pt=class{constructor(t){this.timestamp=t,this.type=nr}},Nt=class{constructor(){this.type=sr}},kt=class{constructor(t){this.id=t,this.type=ar}};var jt=class{constructor(t){this.index=t,this.type=cr}},Dt=class{constructor(t){this.actionId=t,this.type=lr}},Ut=class{constructor(t){this.nextLiftedState=t,this.type=Bt}},Lt=class{constructor(t){this.status=t,this.type=ur}},zt=class{constructor(t){this.status=t,this.type=dr}};var pt=new H("@ngrx/store-devtools Options"),Qe=new H("@ngrx/store-devtools Initial Config");function pr(){return null}var to="NgRx Store DevTools";function eo(e){let t={maxAge:!1,monitor:pr,actionSanitizer:void 0,stateSanitizer:void 0,name:to,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},i=typeof e=="function"?e():e,r=i.logOnly?{pause:!0,export:!0,test:!0}:!1,o=i.features||r||t.features;o.import===!0&&(o.import="custom");let n=Object.assign({},t,{features:o},i);if(n.maxAge&&n.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${n.maxAge}`);return n}function Ye(e,t){return e.filter(i=>t.indexOf(i)<0)}function fr(e){let{computedStates:t,currentStateIndex:i}=e;if(i>=t.length){let{state:o}=t[t.length-1];return o}let{state:r}=t[i];return r}function tt(e){return new W(e,+Date.now())}function ro(e,t){return Object.keys(t).reduce((i,r)=>{let o=Number(r);return i[o]=hr(e,t[o],o),i},{})}function hr(e,t,i){return F(w({},t),{action:e(t.action,i)})}function oo(e,t){return t.map((i,r)=>({state:mr(e,i.state,r),error:i.error}))}function mr(e,t,i){return e(t,i)}function gr(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function io(e,t,i,r){let o=[],n={},p=[];return e.stagedActionIds.forEach((u,y)=>{let f=e.actionsById[u];f&&(y&&Gt(e.computedStates[y],f,t,i,r)||(n[u]=f,o.push(u),p.push(e.computedStates[y])))}),F(w({},e),{stagedActionIds:o,actionsById:n,computedStates:p})}function Gt(e,t,i,r,o){let n=i&&!i(e,t.action),p=r&&!t.action.type.match(r.map(y=>tr(y)).join("|")),u=o&&t.action.type.match(o.map(y=>tr(y)).join("|"));return n||p||u}function tr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Sr(e){return{ngZone:e?a(fe):null,connectInZone:e}}var ft=(()=>{let t=class t extends nt{};t.\u0275fac=(()=>{let r;return function(n){return(r||(r=de(t)))(n||t)}})(),t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})(),lt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},_t=new H("@ngrx/store-devtools Redux Devtools Extension"),Er=(()=>{let t=class t{constructor(r,o,n){this.config=o,this.dispatcher=n,this.zoneConfig=Sr(this.config.connectInZone),this.devtoolsExtension=r,this.createActionStreams()}notify(r,o){if(this.devtoolsExtension)if(r.type===et){if(o.isLocked||o.isPaused)return;let n=fr(o);if(gr(this.config)&&Gt(n,r,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let p=this.config.stateSanitizer?mr(this.config.stateSanitizer,n,o.currentStateIndex):n,u=this.config.actionSanitizer?hr(this.config.actionSanitizer,r,o.nextActionId):r;this.sendToReduxDevtools(()=>this.extensionConnection.send(u,p))}else{let n=F(w({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?ro(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?oo(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new vt(r=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(n=>r.next(n)),o.unsubscribe}):Vt}createActionStreams(){let r=this.createChangesObservable().pipe(ne()),o=r.pipe(N(c=>c.type===lt.START)),n=r.pipe(N(c=>c.type===lt.STOP)),p=r.pipe(N(c=>c.type===lt.DISPATCH),E(c=>this.unwrapAction(c.payload)),te(c=>c.type===Bt?this.dispatcher.pipe(N(s=>s.type===bt),Xt(1e3),ee(1e3),E(()=>c),z(()=>M(c)),B(1)):M(c))),y=r.pipe(N(c=>c.type===lt.ACTION),E(c=>this.unwrapAction(c.payload))).pipe(rt(n)),f=p.pipe(rt(n));this.start$=o.pipe(rt(n)),this.actions$=this.start$.pipe(b(()=>y)),this.liftedActions$=this.start$.pipe(b(()=>f))}unwrapAction(r){return typeof r=="string"?(0,eval)(`(${r})`):r}getExtensionConfig(r){let o={name:r.name,features:r.features,serialize:r.serialize,autoPause:r.autoPause??!1,trace:r.trace??!1,traceLimit:r.traceLimit??75};return r.maxAge!==!1&&(o.maxAge=r.maxAge),o}sendToReduxDevtools(r){try{r()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}};t.\u0275fac=function(o){return new(o||t)(v(_t),v(pt),v(ft))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})(),dt={type:Ot},no="@ngrx/store-devtools/recompute",so={type:no};function yr(e,t,i,r,o){if(r)return{state:i,error:"Interrupted by an error up the chain"};let n=i,p;try{n=e(i,t)}catch(u){p=u.toString(),o.handleError(u)}return{state:n,error:p}}function ut(e,t,i,r,o,n,p,u,y){if(t>=e.length&&e.length===n.length)return e;let f=e.slice(0,t),c=n.length-(y?1:0);for(let s=t;s<c;s++){let g=n[s],C=o[g].action,h=f[s-1],l=h?h.state:r,j=h?h.error:void 0,D=p.indexOf(g)>-1?h:yr(i,C,l,j,u);f.push(D)}return y&&f.push(e[e.length-1]),f}function ao(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:tt(dt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function co(e,t,i,r,o={}){return n=>(p,u)=>{let{monitorState:y,actionsById:f,nextActionId:c,stagedActionIds:s,skippedActionIds:g,committedState:C,currentStateIndex:h,computedStates:l,isLocked:j,isPaused:O}=p||t;p||(f=Object.create(f));function D(A){let S=A,$=s.slice(1,S+1);for(let P=0;P<$.length;P++)if(l[P+1].error){S=P,$=s.slice(1,S+1);break}else delete f[$[P]];g=g.filter(P=>$.indexOf(P)===-1),s=[0,...s.slice(S+1)],C=l[S].state,l=l.slice(S),h=h>S?h-S:0}function J(){f={0:tt(dt)},c=1,s=[0],g=[],C=l[h].state,h=0,l=[]}let m=0;switch(u.type){case ur:{j=u.status,m=1/0;break}case dr:{O=u.status,O?(s=[...s,c],f[c]=new W({type:"@ngrx/devtools/pause"},+Date.now()),c++,m=s.length-1,l=l.concat(l[l.length-1]),h===s.length-2&&h++,m=1/0):J();break}case or:{f={0:tt(dt)},c=1,s=[0],g=[],C=e,h=0,l=[];break}case nr:{J();break}case ir:{f={0:tt(dt)},c=1,s=[0],g=[],h=0,l=[];break}case ar:{let{id:A}=u;g.indexOf(A)===-1?g=[A,...g]:g=g.filter($=>$!==A),m=s.indexOf(A);break}case Yr:{let{start:A,end:S,active:$}=u,P=[];for(let At=A;At<S;At++)P.push(At);$?g=Ye(g,P):g=[...g,...P],m=s.indexOf(A);break}case cr:{h=u.index,m=1/0;break}case lr:{let A=s.indexOf(u.actionId);A!==-1&&(h=A),m=1/0;break}case sr:{s=Ye(s,g),g=[],h=Math.min(h,s.length-1);break}case et:{if(j)return p||t;if(O||p&&Gt(p.computedStates[h],u,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let S=l[l.length-1];l=[...l.slice(0,-1),yr(n,u.action,S.state,S.error,i)],m=1/0;break}o.maxAge&&s.length===o.maxAge&&D(1),h===s.length-1&&h++;let A=c++;f[A]=u,s=[...s,A],m=s.length-1;break}case Bt:{({monitorState:y,actionsById:f,nextActionId:c,stagedActionIds:s,skippedActionIds:g,committedState:C,currentStateIndex:h,computedStates:l,isLocked:j,isPaused:O}=u.nextLiftedState);break}case Ot:{m=0,o.maxAge&&s.length>o.maxAge&&(l=ut(l,m,n,C,f,s,g,i,O),D(s.length-o.maxAge),m=1/0);break}case bt:{if(l.filter(S=>S.error).length>0)m=0,o.maxAge&&s.length>o.maxAge&&(l=ut(l,m,n,C,f,s,g,i,O),D(s.length-o.maxAge),m=1/0);else{if(!O&&!j){h===s.length-1&&h++;let S=c++;f[S]=new W(u,+Date.now()),s=[...s,S],m=s.length-1,l=ut(l,m,n,C,f,s,g,i,O)}l=l.map(S=>F(w({},S),{state:n(S.state,so)})),h=s.length-1,o.maxAge&&s.length>o.maxAge&&D(s.length-o.maxAge),m=1/0}break}default:{m=1/0;break}}return l=ut(l,m,n,C,f,s,g,i,O),y=r(y,u),{monitorState:y,actionsById:f,nextActionId:c,stagedActionIds:s,skippedActionIds:g,committedState:C,currentStateIndex:h,computedStates:l,isLocked:j,isPaused:O}}}var er=(()=>{let t=class t{constructor(r,o,n,p,u,y,f,c){let s=ao(f,c.monitor),g=co(f,s,y,c.monitor,c),C=xt(xt(o.asObservable().pipe(se(1)),p.actions$).pipe(E(tt)),r,p.liftedActions$).pipe(Zt(Jt)),h=n.pipe(E(g)),l=Sr(c.connectInZone),j=new qt(1);this.liftedStateSubscription=C.pipe(k(h),rr(l),ie(({state:J},[m,A])=>{let S=A(J,m);return m.type!==et&&gr(c)&&(S=io(S,c.predicate,c.actionsSafelist,c.actionsBlocklist)),p.notify(m,S),{state:S,action:m}},{state:s,action:null})).subscribe(({state:J,action:m})=>{if(j.next(J),m.type===et){let A=m.action;u.next(A)}}),this.extensionStartSubscription=p.start$.pipe(rr(l)).subscribe(()=>{this.refresh()});let O=j.asObservable(),D=O.pipe(E(fr));Object.defineProperty(D,"state",{value:Te(D,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=r,this.liftedState=O,this.state=D}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(r){this.dispatcher.next(r)}next(r){this.dispatcher.next(r)}error(r){}complete(){}performAction(r){this.dispatch(new W(r,+Date.now()))}refresh(){this.dispatch(new wt)}reset(){this.dispatch(new Ft(+Date.now()))}rollback(){this.dispatch(new Mt(+Date.now()))}commit(){this.dispatch(new Pt(+Date.now()))}sweep(){this.dispatch(new Nt)}toggleAction(r){this.dispatch(new kt(r))}jumpToAction(r){this.dispatch(new Dt(r))}jumpToState(r){this.dispatch(new jt(r))}importState(r){this.dispatch(new Ut(r))}lockChanges(r){this.dispatch(new Lt(r))}pauseRecording(r){this.dispatch(new zt(r))}};t.\u0275fac=function(o){return new(o||t)(v(ft),v(nt),v(we),v(Er),v(Me),v(it),v(be),v(pt))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})();function rr({ngZone:e,connectInZone:t}){return i=>t?new vt(r=>i.subscribe({next:o=>e.run(()=>r.next(o)),error:o=>e.run(()=>r.error(o)),complete:()=>e.run(()=>r.complete())})):i}var lo=new H("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function uo(e,t){return!!e||t.monitor!==pr}function po(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function fo(e){return e.state}function Ar(e={}){return ot([Er,ft,er,{provide:Qe,useValue:e},{provide:lo,deps:[_t,pt],useFactory:uo},{provide:_t,useFactory:po},{provide:pt,deps:[Qe],useFactory:eo},{provide:Pe,deps:[er],useFactory:fo},{provide:Fe,useExisting:ft}])}var ht=()=>{let e=a(x),t=a(Z);return e.select(at).pipe(B(1),E(i=>!!i||t.createUrlTree(["/","auth"])))};var vr=[{path:"",loadComponent:()=>import("./chunk-NYZN3YLR.js").then(e=>e.Shell),children:[{path:"auth",loadChildren:()=>import("./chunk-XUTPQNPE.js").then(e=>e.routes)},{path:"dashboard",canActivate:[ht],loadChildren:()=>import("./chunk-EHKBDM3F.js").then(e=>e.routes)},{path:"graph",loadChildren:()=>import("./chunk-6IZ2DVF4.js").then(e=>e.routes)},{path:"flashcard",canActivate:[ht],loadChildren:()=>import("./chunk-7GWHLDWO.js").then(e=>e.routes)},{path:"editor",canActivate:[ht],loadChildren:()=>import("./chunk-FHG362VY.js").then(e=>e.routes)},{path:"**",redirectTo:"auth",pathMatch:"full"}]},{path:"**",redirectTo:"auth",pathMatch:"full"}];var Tr="@ngrx/router-store/request",Wo=X(Tr,U()),Or="@ngrx/router-store/navigation",Qo=X(Or,U()),br="@ngrx/router-store/cancel",Yo=X(br,U()),Cr="@ngrx/router-store/error",ti=X(Cr,U()),wr="@ngrx/router-store/navigated",ei=X(wr,U());var mt=class{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){let i=t.children.map(r=>this.serializeRoute(r));return{params:t.params,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:typeof t.routeConfig.title=="string"?t.routeConfig.title:void 0}:null,queryParams:t.queryParams,fragment:t.fragment,firstChild:i[0],children:i}}},Ht=function(e){return e[e.PreActivation=1]="PreActivation",e[e.PostActivation=2]="PostActivation",e}(Ht||{}),ho="router",xr=new H("@ngrx/router-store Internal Configuration"),Fr=new H("@ngrx/router-store Configuration"),Kt=function(e){return e[e.Full=0]="Full",e[e.Minimal=1]="Minimal",e}(Kt||{});function mo(e){return w({stateKey:ho,serializer:mt,navigationActionTiming:Ht.PreActivation},e)}var gt=class{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){let i=t.children.map(r=>this.serializeRoute(r));return{params:t.params,paramMap:t.paramMap,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{component:t.routeConfig.component,path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:t.routeConfig.title}:null,queryParams:t.queryParams,queryParamMap:t.queryParamMap,fragment:t.fragment,component:t.routeConfig?t.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:i[0],pathFromRoot:void 0,children:i}}},St=class{},L=function(e){return e[e.NONE=1]="NONE",e[e.ROUTER=2]="ROUTER",e[e.STORE=3]="STORE",e}(L||{}),Rr=(()=>{let t=class t{constructor(r,o,n,p,u,y){this.store=r,this.router=o,this.serializer=n,this.errorHandler=p,this.config=u,this.activeRuntimeChecks=y,this.lastEvent=null,this.routerState=null,this.trigger=L.NONE,this.stateKey=this.config.stateKey,!ke()&&V()&&(y?.strictActionSerializability||y?.strictStateSerializability)&&this.serializer instanceof gt&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(Ne(this.stateKey),k(this.store)).subscribe(([r,o])=>{this.navigateIfNeeded(r,o)})}navigateIfNeeded(r,o){if(!r||!r.state||this.trigger===L.ROUTER||this.lastEvent instanceof Rt)return;let n=r.state.url;go(this.router.url,n)||(this.storeState=o,this.trigger=L.STORE,this.router.navigateByUrl(n).catch(p=>{this.errorHandler.handleError(p)}))}setUpRouterEventsListener(){let r=this.config.navigationActionTiming===Ht.PostActivation,o;this.router.events.pipe(k(this.store)).subscribe(([n,p])=>{this.lastEvent=n,n instanceof Rt?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==L.STORE&&(this.storeState=p,this.dispatchRouterRequest(n))):n instanceof Tt?(o=n,!r&&this.trigger!==L.STORE&&this.dispatchRouterNavigation(n)):n instanceof ve?(this.dispatchRouterCancel(n),this.reset()):n instanceof It?(this.dispatchRouterError(n),this.reset()):n instanceof Ae&&(this.trigger!==L.STORE&&(r&&this.dispatchRouterNavigation(o),this.dispatchRouterNavigated(n)),this.reset())})}dispatchRouterRequest(r){this.dispatchRouterAction(Tr,{event:r})}dispatchRouterNavigation(r){let o=this.serializer.serialize(r.state);this.dispatchRouterAction(Or,{routerState:o,event:new Tt(r.id,r.url,r.urlAfterRedirects,o)})}dispatchRouterCancel(r){this.dispatchRouterAction(br,{storeState:this.storeState,event:r})}dispatchRouterError(r){this.dispatchRouterAction(Cr,{storeState:this.storeState,event:new It(r.id,r.url,`${r}`)})}dispatchRouterNavigated(r){let o=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(wr,{event:r,routerState:o})}dispatchRouterAction(r,o){this.trigger=L.ROUTER;try{this.store.dispatch({type:r,payload:F(w({routerState:this.routerState},o),{event:this.config.routerState===Kt.Full?o.event:{id:o.event.id,url:o.event.url,urlAfterRedirects:o.event.urlAfterRedirects}})})}finally{this.trigger=L.NONE}}reset(){this.trigger=L.NONE,this.storeState=null,this.routerState=null}};t.\u0275fac=function(o){return new(o||t)(v(x),v(Z),v(St),v(it),v(Fr),v(Ce))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})();function go(e,t){return Ir(e)===Ir(t)}function Ir(e){return e?.length>0&&e[e.length-1]==="/"?e.substring(0,e.length-1):e}function Mr(e={}){return ot([{provide:xr,useValue:e},{provide:Fr,useFactory:mo,deps:[xr]},{provide:St,useClass:e.serializer?e.serializer:e.routerState===Kt.Full?gt:mt},ce(()=>a(Rr)),Rr])}var So={access_token:null,current:null},Pr=st(So,Q(_.setCurrentUser,(e,{jwt:t})=>F(w({},e),{current:t})),Q(_.loginSuccess,(e,{data:t})=>F(w({},e),{access_token:t.access_token})));var Nr=Oe({source:"Actor",events:{"Load Actor Profile":U(),"Load Actor Profile Success":U(),"Load Actor Profile Failure":U()}});var Eo={current:null,error:null},kr=st(Eo,Q(Nr.loadActorProfileFailure,(e,{error:t})=>F(w({},e),{error:t})));var jr={auth:Pr,actors:kr,flashcards:qe,models:Be,reviewSchedule:Ue,recentFlashcards:_e,knowledgeGraphStats:He},wi=V()?[]:[];var Et=class e{http=a(Se);baseUrl="/api";login(t,i){return this.http.post(`${this.baseUrl}/auth/login`,{username:t,password:i})}static \u0275fac=function(i){return new(i||e)};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};var q=class extends Error{};q.prototype.name="InvalidTokenError";function yo(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,i)=>{let r=i.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Ao(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return yo(t)}catch{return atob(t)}}function Dr(e,t){if(typeof e!="string")throw new q("Invalid token specified: must be a string");t||(t={});let i=t.header===!0?0:1,r=e.split(".")[i];if(typeof r!="string")throw new q(`Invalid token specified: missing part #${i+1}`);let o;try{o=Ao(r)}catch(n){throw new q(`Invalid token specified: invalid base64 for part #${i+1} (${n.message})`)}try{return JSON.parse(o)}catch(n){throw new q(`Invalid token specified: invalid json for part #${i+1} (${n.message})`)}}var Ur=R((e=a(I),t=a(Et))=>e.pipe(T(_.createSession),oe(({username:i,password:r})=>t.login(i,r).pipe(E(o=>_.loginSuccess({data:o})),z(o=>M(_.loginFailure({error:o})))))),{functional:!0}),Lr=R((e=a(I),t=a(Z),i=a(x))=>e.pipe(T(_.loginSuccess),E(({data:{access_token:r}})=>Dr(r)),b(r=>[_.setCurrentUser({jwt:r})]),ae(()=>t.navigate(["/","dashboard"]))),{functional:!0,dispatch:!0});var zr=R((e=a(I),t=a(K))=>e.pipe(T(d.createModel),b(({model:i})=>t.createModel(i)),E(({activityPubId:i})=>d.loadModel({activityPubId:i}))),{functional:!0,dispatch:!0}),_r=R((e=a(I),t=a(K))=>e.pipe(T(d.loadModels),b(()=>t.getAllModels()),E(i=>d.loadModelsSuccess({data:i}))),{functional:!0,dispatch:!0}),$r=R((e=a(I),t=a(K))=>e.pipe(T(d.loadFlashcardsPage),b(({page:i,limit:r})=>t.getFlashcards(i,r).pipe(E(o=>d.loadFlashcardsPageSuccess({flashcards:o.data,totalCount:o.total,page:i,limit:r})),z(o=>M(d.loadFlashcardsPageFailure({error:o}),d.setLoadingStatus({loading:!1}),d.setAllFlashcardsLoaded({loaded:!1})))))),{functional:!0}),Br=R((e=a(I),t=a(K))=>e.pipe(T(d.loadFlashcard),b(({activityPubId:i})=>t.getFlashcardById(i).pipe(E(r=>d.loadFlashcardSuccess({data:r})),z(r=>M(d.loadFlashcardFailure({error:r})))))),{functional:!0,dispatch:!0}),Gr=R((e=a(I),t=a(x),i=a(K))=>e.pipe(T(d.loadFlashcardSuccess),b(r=>t.select(Ge(r.data["edu:model"])).pipe(B(1),Yt(M(r)))),N(([r])=>!r),b(([r,{data:o}])=>i.getModelById(o["edu:model"]).pipe(E(n=>d.loadModelSuccess({data:n})),z(n=>(console.error(n),M(d.loadModelFailure({error:n}))))))),{functional:!0,dispatch:!0}),Hr=R((e=a(I),t=a(K),i=a(x))=>e.pipe(T(d.createFlashcard),k(i.select(De)),b(([r,o])=>o?t.createFlashcard(r.flashcard,o).pipe(E(({activityPubId:n})=>d.loadFlashcard({activityPubId:n})),z(n=>(console.error("Error creating flashcard:",n),M(d.loadFlashcardFailure({error:n}))))):(console.error("Username not found in store. Cannot create flashcard."),M(d.loadFlashcardFailure({error:"Username not found"}))))),{functional:!0,dispatch:!0}),Kr=R((e=a(I),t=a(ct))=>e.pipe(T(d.addToReview),b(({flashcard:i})=>t.addToReview({flashcardActivityPubId:i.activityPubId}))),{functional:!0,dispatch:!1}),rn=R((e=a(I),t=a(x))=>e.pipe(T(d.nextPage),k(t.select(Y),t.select(Ze)),N(([,i,r])=>i<r),E(([,i])=>d.changePage({page:i+1}))),{functional:!0}),on=R((e=a(I),t=a(x))=>e.pipe(T(d.previousPage),k(t.select(Y)),N(([,i])=>i>1),E(([,i])=>d.changePage({page:i-1}))),{functional:!0}),nn=R((e=a(I),t=a(x))=>Wt([t.select(Y),t.select(Ct)]).pipe(re((i,r)=>JSON.stringify(i)===JSON.stringify(r)),E(([i,r])=>d.loadFlashcardsPage({page:i,limit:r}))),{functional:!0}),sn=R((e=a(I),t=a(x))=>e.pipe(T(d.loadFlashcardsPageSuccess),k(t.select(Je),t.select(Ve)),E(([,i,r])=>i.length>=r?d.setAllFlashcardsLoaded({loaded:!0}):d.setAllFlashcardsLoaded({loaded:!1}))),{functional:!0}),qr=R((e=a(I),t=a(x))=>e.pipe(T(d.scrollReachedBottom),k(t.select(Xe),t.select(We),t.select(Y),t.select(Ct)),N(([,i,r])=>!i&&!r),E(([,,,i,r])=>d.loadFlashcardsPage({page:i+1,limit:r}))),{functional:!0});var Jr=(e,t)=>a(x).select(at).pipe(B(1),Qt(r=>t(e.clone({setHeaders:r?{Authorization:`Bearer ${r}`}:{}}))));var Vr={providers:[ct,le(),me(),Ee(ye([Jr])),Re(vr,Ie({scrollPositionRestoration:"enabled"})),je(jr),Le({loginEffect:Ur,loginSuccessEffect:Lr,loadFlashcardsPageEffect:$r,loadFlashcardEffect:Br,loadModelEffect:Gr,loadModelsEffect:_r,createModelEffect:zr,createFlashcardEffect:Hr,addFlashcardToReviewEffect:Kr,loadReviewScheduleEffect:ze,loadRecentFlashcards$:$e,loadKnowledgeGraphStats$:Ke,loadNextPageOnScrollEffect:qr}),Mr(),Ar({maxAge:25,logOnly:!V(),autoPause:!0,trace:!1,traceLimit:75})]};var yt=class e{title=ue("frontend");static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&he(0,"router-outlet")},dependencies:[xe],encapsulation:2})};ge(yt,Vr).catch(e=>console.error(e));
