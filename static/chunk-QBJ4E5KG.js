import{a as f}from"./chunk-WJ6VB3GZ.js";import{a as i}from"./chunk-XG3JPJ5H.js";import{a as h}from"./chunk-3ML6LPQE.js";import{Dd as l,Ed as g,Gd as o,Hd as F,fa as u,ja as m}from"./chunk-BDC5ZKWJ.js";import{a as r,b as s}from"./chunk-2NFLSA4Y.js";var b=class e{constructor(t){this.http=t}apiUrl="/api/srs";submitReview(t){return this.http.post(`${this.apiUrl}/review`,t)}addToReview(t){return this.http.post(`${this.apiUrl}/add`,t)}getDueFlashcards(){return this.http.get(`${this.apiUrl}/due`)}static \u0275fac=function(a){return new(a||e)(m(h))};static \u0275prov=u({token:e,factory:e.\u0275fac})};var c=f({selectId:e=>e.activityPubId||e.id}),y={ids:[],entities:{},totalCount:0,page:1,limit:10,selectedModelIds:[],loading:!1,allFlashcardsLoaded:!1},T=F(y,o(i.loadFlashcardSuccess,(e,{data:t})=>c.upsertOne(t,e)),o(i.loadFlashcardsPageSuccess,(e,{flashcards:t,totalCount:a,page:n,limit:p})=>c.upsertMany(t,s(r({},e),{totalCount:a,page:n,limit:p,loading:!1}))),o(i.loadMoreFlashcardsSuccess,(e,{flashcards:t,totalCount:a,page:n,limit:p})=>c.upsertMany(t,s(r({},e),{totalCount:a,page:n,limit:p,loading:!1}))),o(i.changePage,(e,{page:t})=>s(r({},e),{page:t})),o(i.changeItemsPerPage,(e,{itemsPerPage:t})=>s(r({},e),{limit:t,page:1})),o(i.toggleModelFilter,(e,{modelIds:t})=>s(r({},e),{selectedModelIds:t})),o(i.setLoadingStatus,(e,{loading:t})=>s(r({},e),{loading:t})),o(i.setAllFlashcardsLoaded,(e,{loaded:t})=>s(r({},e),{allFlashcardsLoaded:t})));var S="flashcards",d=g(S),x=c.getSelectors(),v=l(d,x.selectAll),M=l(d,e=>e.totalCount),W=l(d,e=>e.page),I=l(d,e=>e.limit),q=l(M,I,(e,t)=>t===0?0:Math.ceil(e/t)),L=l(d,e=>e.selectedModelIds),z=l(v,L,(e,t)=>e.map(a=>s(r({},a),{model:a.eduModel})).filter(a=>a.model!==null).filter(a=>t.length==0?!0:t.includes(a.model.id))),B=l(d,e=>e.loading),G=l(d,e=>e.allFlashcardsLoaded);export{T as a,v as b,M as c,W as d,I as e,q as f,L as g,z as h,B as i,G as j,b as k};
