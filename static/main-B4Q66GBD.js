import{b as De,c as x,d as R,e as T,f as Le,g as Ue,k as ze,l as K,m as _e,o as Ge,p as He}from"./chunk-ORA4C2H3.js";import{b as at}from"./chunk-DXWBUUPU.js";import{a as z}from"./chunk-D7RPFXXP.js";import{a as Ke,b as qe,c as Je,d as Y,e as Ct,f as Ve,i as Ze,j as Xe,k as ct}from"./chunk-HLPPJ7LG.js";import{a as Rt,b as Ae,c as ve,d as It,e as Tt,f as xe,g as Z,i as Re,j as Ie}from"./chunk-VQSRQ7VI.js";import{b as $e,d as Be}from"./chunk-NTOV2DB4.js";import{a as h}from"./chunk-LOLW7ZF5.js";import{a as ge}from"./chunk-DYOH6FM5.js";import{a as Se,b as Ee,c as ye}from"./chunk-NCQ6W5LN.js";import{$ as b,Ad as Ne,B as xt,Ba as ue,Bd as ke,C as P,E as $,Ec as V,Ed as je,F as Yt,Fa as de,Fd as Q,G as te,Gd as st,H as ee,Ib as he,J as B,N as re,O as oe,W as ie,X as ne,Z as se,aa as rt,ba as ae,c as vt,ca as D,fa as G,h as qt,i as Jt,ia as H,ja as v,jd as Te,k as Vt,ka as a,kd as X,l as Zt,la as ot,ld as L,ma as ce,mb as pe,md as Oe,n as j,od as Ot,pd as nt,qd as be,r as Xt,rd as Ce,s as E,t as Wt,tb as fe,u as Qt,ud as we,vd as Fe,wc as me,wd as bt,xa as it,xd as Me,yd as Pe,za as le,zd as I}from"./chunk-VSLXTYK7.js";import{a as w,b as F}from"./chunk-2NFLSA4Y.js";var et="PERFORM_ACTION",Wr="REFRESH",rr="RESET",or="ROLLBACK",ir="COMMIT",nr="SWEEP",sr="TOGGLE_ACTION",Qr="SET_ACTIONS_ACTIVE",ar="JUMP_TO_STATE",cr="JUMP_TO_ACTION",Bt="IMPORT_STATE",lr="LOCK_CHANGES",ur="PAUSE_RECORDING",W=class{constructor(t,i){if(this.action=t,this.timestamp=i,this.type=et,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},wt=class{constructor(){this.type=Wr}},Ft=class{constructor(t){this.timestamp=t,this.type=rr}},Mt=class{constructor(t){this.timestamp=t,this.type=or}},Pt=class{constructor(t){this.timestamp=t,this.type=ir}},Nt=class{constructor(){this.type=nr}},kt=class{constructor(t){this.id=t,this.type=sr}};var jt=class{constructor(t){this.index=t,this.type=ar}},Dt=class{constructor(t){this.actionId=t,this.type=cr}},Lt=class{constructor(t){this.nextLiftedState=t,this.type=Bt}},Ut=class{constructor(t){this.status=t,this.type=lr}},zt=class{constructor(t){this.status=t,this.type=ur}};var pt=new H("@ngrx/store-devtools Options"),We=new H("@ngrx/store-devtools Initial Config");function dr(){return null}var Yr="NgRx Store DevTools";function to(e){let t={maxAge:!1,monitor:dr,actionSanitizer:void 0,stateSanitizer:void 0,name:Yr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},i=typeof e=="function"?e():e,r=i.logOnly?{pause:!0,export:!0,test:!0}:!1,o=i.features||r||t.features;o.import===!0&&(o.import="custom");let n=Object.assign({},t,{features:o},i);if(n.maxAge&&n.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${n.maxAge}`);return n}function Qe(e,t){return e.filter(i=>t.indexOf(i)<0)}function pr(e){let{computedStates:t,currentStateIndex:i}=e;if(i>=t.length){let{state:o}=t[t.length-1];return o}let{state:r}=t[i];return r}function tt(e){return new W(e,+Date.now())}function eo(e,t){return Object.keys(t).reduce((i,r)=>{let o=Number(r);return i[o]=fr(e,t[o],o),i},{})}function fr(e,t,i){return F(w({},t),{action:e(t.action,i)})}function ro(e,t){return t.map((i,r)=>({state:hr(e,i.state,r),error:i.error}))}function hr(e,t,i){return e(t,i)}function mr(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function oo(e,t,i,r){let o=[],n={},d=[];return e.stagedActionIds.forEach((u,y)=>{let p=e.actionsById[u];p&&(y&&Gt(e.computedStates[y],p,t,i,r)||(n[u]=p,o.push(u),d.push(e.computedStates[y])))}),F(w({},e),{stagedActionIds:o,actionsById:n,computedStates:d})}function Gt(e,t,i,r,o){let n=i&&!i(e,t.action),d=r&&!t.action.type.match(r.map(y=>Ye(y)).join("|")),u=o&&t.action.type.match(o.map(y=>Ye(y)).join("|"));return n||d||u}function Ye(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function gr(e){return{ngZone:e?a(fe):null,connectInZone:e}}var ft=(()=>{let t=class t extends nt{};t.\u0275fac=(()=>{let r;return function(n){return(r||(r=de(t)))(n||t)}})(),t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})(),lt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},_t=new H("@ngrx/store-devtools Redux Devtools Extension"),Sr=(()=>{let t=class t{constructor(r,o,n){this.config=o,this.dispatcher=n,this.zoneConfig=gr(this.config.connectInZone),this.devtoolsExtension=r,this.createActionStreams()}notify(r,o){if(this.devtoolsExtension)if(r.type===et){if(o.isLocked||o.isPaused)return;let n=pr(o);if(mr(this.config)&&Gt(n,r,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let d=this.config.stateSanitizer?hr(this.config.stateSanitizer,n,o.currentStateIndex):n,u=this.config.actionSanitizer?fr(this.config.actionSanitizer,r,o.nextActionId):r;this.sendToReduxDevtools(()=>this.extensionConnection.send(u,d))}else{let n=F(w({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?eo(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?ro(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new vt(r=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(n=>r.next(n)),o.unsubscribe}):Vt}createActionStreams(){let r=this.createChangesObservable().pipe(ne()),o=r.pipe(P(c=>c.type===lt.START)),n=r.pipe(P(c=>c.type===lt.STOP)),d=r.pipe(P(c=>c.type===lt.DISPATCH),E(c=>this.unwrapAction(c.payload)),te(c=>c.type===Bt?this.dispatcher.pipe(P(s=>s.type===bt),Xt(1e3),ee(1e3),E(()=>c),$(()=>j(c)),B(1)):j(c))),y=r.pipe(P(c=>c.type===lt.ACTION),E(c=>this.unwrapAction(c.payload))).pipe(rt(n)),p=d.pipe(rt(n));this.start$=o.pipe(rt(n)),this.actions$=this.start$.pipe(b(()=>y)),this.liftedActions$=this.start$.pipe(b(()=>p))}unwrapAction(r){return typeof r=="string"?(0,eval)(`(${r})`):r}getExtensionConfig(r){let o={name:r.name,features:r.features,serialize:r.serialize,autoPause:r.autoPause??!1,trace:r.trace??!1,traceLimit:r.traceLimit??75};return r.maxAge!==!1&&(o.maxAge=r.maxAge),o}sendToReduxDevtools(r){try{r()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}};t.\u0275fac=function(o){return new(o||t)(v(_t),v(pt),v(ft))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})(),dt={type:Ot},io="@ngrx/store-devtools/recompute",no={type:io};function Er(e,t,i,r,o){if(r)return{state:i,error:"Interrupted by an error up the chain"};let n=i,d;try{n=e(i,t)}catch(u){d=u.toString(),o.handleError(u)}return{state:n,error:d}}function ut(e,t,i,r,o,n,d,u,y){if(t>=e.length&&e.length===n.length)return e;let p=e.slice(0,t),c=n.length-(y?1:0);for(let s=t;s<c;s++){let g=n[s],C=o[g].action,f=p[s-1],l=f?f.state:r,N=f?f.error:void 0,k=d.indexOf(g)>-1?f:Er(i,C,l,N,u);p.push(k)}return y&&p.push(e[e.length-1]),p}function so(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:tt(dt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function ao(e,t,i,r,o={}){return n=>(d,u)=>{let{monitorState:y,actionsById:p,nextActionId:c,stagedActionIds:s,skippedActionIds:g,committedState:C,currentStateIndex:f,computedStates:l,isLocked:N,isPaused:O}=d||t;d||(p=Object.create(p));function k(A){let S=A,_=s.slice(1,S+1);for(let M=0;M<_.length;M++)if(l[M+1].error){S=M,_=s.slice(1,S+1);break}else delete p[_[M]];g=g.filter(M=>_.indexOf(M)===-1),s=[0,...s.slice(S+1)],C=l[S].state,l=l.slice(S),f=f>S?f-S:0}function J(){p={0:tt(dt)},c=1,s=[0],g=[],C=l[f].state,f=0,l=[]}let m=0;switch(u.type){case lr:{N=u.status,m=1/0;break}case ur:{O=u.status,O?(s=[...s,c],p[c]=new W({type:"@ngrx/devtools/pause"},+Date.now()),c++,m=s.length-1,l=l.concat(l[l.length-1]),f===s.length-2&&f++,m=1/0):J();break}case rr:{p={0:tt(dt)},c=1,s=[0],g=[],C=e,f=0,l=[];break}case ir:{J();break}case or:{p={0:tt(dt)},c=1,s=[0],g=[],f=0,l=[];break}case sr:{let{id:A}=u;g.indexOf(A)===-1?g=[A,...g]:g=g.filter(_=>_!==A),m=s.indexOf(A);break}case Qr:{let{start:A,end:S,active:_}=u,M=[];for(let At=A;At<S;At++)M.push(At);_?g=Qe(g,M):g=[...g,...M],m=s.indexOf(A);break}case ar:{f=u.index,m=1/0;break}case cr:{let A=s.indexOf(u.actionId);A!==-1&&(f=A),m=1/0;break}case nr:{s=Qe(s,g),g=[],f=Math.min(f,s.length-1);break}case et:{if(N)return d||t;if(O||d&&Gt(d.computedStates[f],u,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let S=l[l.length-1];l=[...l.slice(0,-1),Er(n,u.action,S.state,S.error,i)],m=1/0;break}o.maxAge&&s.length===o.maxAge&&k(1),f===s.length-1&&f++;let A=c++;p[A]=u,s=[...s,A],m=s.length-1;break}case Bt:{({monitorState:y,actionsById:p,nextActionId:c,stagedActionIds:s,skippedActionIds:g,committedState:C,currentStateIndex:f,computedStates:l,isLocked:N,isPaused:O}=u.nextLiftedState);break}case Ot:{m=0,o.maxAge&&s.length>o.maxAge&&(l=ut(l,m,n,C,p,s,g,i,O),k(s.length-o.maxAge),m=1/0);break}case bt:{if(l.filter(S=>S.error).length>0)m=0,o.maxAge&&s.length>o.maxAge&&(l=ut(l,m,n,C,p,s,g,i,O),k(s.length-o.maxAge),m=1/0);else{if(!O&&!N){f===s.length-1&&f++;let S=c++;p[S]=new W(u,+Date.now()),s=[...s,S],m=s.length-1,l=ut(l,m,n,C,p,s,g,i,O)}l=l.map(S=>F(w({},S),{state:n(S.state,no)})),f=s.length-1,o.maxAge&&s.length>o.maxAge&&k(s.length-o.maxAge),m=1/0}break}default:{m=1/0;break}}return l=ut(l,m,n,C,p,s,g,i,O),y=r(y,u),{monitorState:y,actionsById:p,nextActionId:c,stagedActionIds:s,skippedActionIds:g,committedState:C,currentStateIndex:f,computedStates:l,isLocked:N,isPaused:O}}}var tr=(()=>{let t=class t{constructor(r,o,n,d,u,y,p,c){let s=so(p,c.monitor),g=ao(p,s,y,c.monitor,c),C=xt(xt(o.asObservable().pipe(se(1)),d.actions$).pipe(E(tt)),r,d.liftedActions$).pipe(Zt(Jt)),f=n.pipe(E(g)),l=gr(c.connectInZone),N=new qt(1);this.liftedStateSubscription=C.pipe(D(f),er(l),ie(({state:J},[m,A])=>{let S=A(J,m);return m.type!==et&&mr(c)&&(S=oo(S,c.predicate,c.actionsSafelist,c.actionsBlocklist)),d.notify(m,S),{state:S,action:m}},{state:s,action:null})).subscribe(({state:J,action:m})=>{if(N.next(J),m.type===et){let A=m.action;u.next(A)}}),this.extensionStartSubscription=d.start$.pipe(er(l)).subscribe(()=>{this.refresh()});let O=N.asObservable(),k=O.pipe(E(pr));Object.defineProperty(k,"state",{value:Te(k,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=r,this.liftedState=O,this.state=k}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(r){this.dispatcher.next(r)}next(r){this.dispatcher.next(r)}error(r){}complete(){}performAction(r){this.dispatch(new W(r,+Date.now()))}refresh(){this.dispatch(new wt)}reset(){this.dispatch(new Ft(+Date.now()))}rollback(){this.dispatch(new Mt(+Date.now()))}commit(){this.dispatch(new Pt(+Date.now()))}sweep(){this.dispatch(new Nt)}toggleAction(r){this.dispatch(new kt(r))}jumpToAction(r){this.dispatch(new Dt(r))}jumpToState(r){this.dispatch(new jt(r))}importState(r){this.dispatch(new Lt(r))}lockChanges(r){this.dispatch(new Ut(r))}pauseRecording(r){this.dispatch(new zt(r))}};t.\u0275fac=function(o){return new(o||t)(v(ft),v(nt),v(we),v(Sr),v(Me),v(it),v(be),v(pt))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})();function er({ngZone:e,connectInZone:t}){return i=>t?new vt(r=>i.subscribe({next:o=>e.run(()=>r.next(o)),error:o=>e.run(()=>r.error(o)),complete:()=>e.run(()=>r.complete())})):i}var co=new H("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function lo(e,t){return!!e||t.monitor!==dr}function uo(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function po(e){return e.state}function yr(e={}){return ot([Sr,ft,tr,{provide:We,useValue:e},{provide:co,deps:[_t,pt],useFactory:lo},{provide:_t,useFactory:uo},{provide:pt,deps:[We],useFactory:to},{provide:Pe,deps:[tr],useFactory:po},{provide:Fe,useExisting:ft}])}var ht=()=>{let e=a(I),t=a(Z);return e.select(at).pipe(B(1),E(i=>!!i||t.createUrlTree(["/","auth"])))};var Ar=[{path:"",loadComponent:()=>import("./chunk-4UMRJBQA.js").then(e=>e.Shell),children:[{path:"auth",loadChildren:()=>import("./chunk-YF4ODUAH.js").then(e=>e.routes)},{path:"dashboard",canActivate:[ht],loadChildren:()=>import("./chunk-6H4B4XQY.js").then(e=>e.routes)},{path:"graph",loadChildren:()=>import("./chunk-I6MTY7RY.js").then(e=>e.routes)},{path:"flashcard",canActivate:[ht],loadChildren:()=>import("./chunk-DASZJBHQ.js").then(e=>e.routes)},{path:"editor",canActivate:[ht],loadChildren:()=>import("./chunk-GNOAVCY3.js").then(e=>e.routes)},{path:"**",redirectTo:"auth",pathMatch:"full"}]},{path:"**",redirectTo:"auth",pathMatch:"full"}];var Ir="@ngrx/router-store/request",Xo=X(Ir,L()),Tr="@ngrx/router-store/navigation",Wo=X(Tr,L()),Or="@ngrx/router-store/cancel",Qo=X(Or,L()),br="@ngrx/router-store/error",Yo=X(br,L()),Cr="@ngrx/router-store/navigated",ti=X(Cr,L());var mt=class{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){let i=t.children.map(r=>this.serializeRoute(r));return{params:t.params,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:typeof t.routeConfig.title=="string"?t.routeConfig.title:void 0}:null,queryParams:t.queryParams,fragment:t.fragment,firstChild:i[0],children:i}}},Ht=function(e){return e[e.PreActivation=1]="PreActivation",e[e.PostActivation=2]="PostActivation",e}(Ht||{}),fo="router",vr=new H("@ngrx/router-store Internal Configuration"),wr=new H("@ngrx/router-store Configuration"),Kt=function(e){return e[e.Full=0]="Full",e[e.Minimal=1]="Minimal",e}(Kt||{});function ho(e){return w({stateKey:fo,serializer:mt,navigationActionTiming:Ht.PreActivation},e)}var gt=class{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){let i=t.children.map(r=>this.serializeRoute(r));return{params:t.params,paramMap:t.paramMap,data:t.data,url:t.url,outlet:t.outlet,title:t.title,routeConfig:t.routeConfig?{component:t.routeConfig.component,path:t.routeConfig.path,pathMatch:t.routeConfig.pathMatch,redirectTo:t.routeConfig.redirectTo,outlet:t.routeConfig.outlet,title:t.routeConfig.title}:null,queryParams:t.queryParams,queryParamMap:t.queryParamMap,fragment:t.fragment,component:t.routeConfig?t.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:i[0],pathFromRoot:void 0,children:i}}},St=class{},U=function(e){return e[e.NONE=1]="NONE",e[e.ROUTER=2]="ROUTER",e[e.STORE=3]="STORE",e}(U||{}),xr=(()=>{let t=class t{constructor(r,o,n,d,u,y){this.store=r,this.router=o,this.serializer=n,this.errorHandler=d,this.config=u,this.activeRuntimeChecks=y,this.lastEvent=null,this.routerState=null,this.trigger=U.NONE,this.stateKey=this.config.stateKey,!ke()&&V()&&(y?.strictActionSerializability||y?.strictStateSerializability)&&this.serializer instanceof gt&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe(Ne(this.stateKey),D(this.store)).subscribe(([r,o])=>{this.navigateIfNeeded(r,o)})}navigateIfNeeded(r,o){if(!r||!r.state||this.trigger===U.ROUTER||this.lastEvent instanceof Rt)return;let n=r.state.url;mo(this.router.url,n)||(this.storeState=o,this.trigger=U.STORE,this.router.navigateByUrl(n).catch(d=>{this.errorHandler.handleError(d)}))}setUpRouterEventsListener(){let r=this.config.navigationActionTiming===Ht.PostActivation,o;this.router.events.pipe(D(this.store)).subscribe(([n,d])=>{this.lastEvent=n,n instanceof Rt?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==U.STORE&&(this.storeState=d,this.dispatchRouterRequest(n))):n instanceof Tt?(o=n,!r&&this.trigger!==U.STORE&&this.dispatchRouterNavigation(n)):n instanceof ve?(this.dispatchRouterCancel(n),this.reset()):n instanceof It?(this.dispatchRouterError(n),this.reset()):n instanceof Ae&&(this.trigger!==U.STORE&&(r&&this.dispatchRouterNavigation(o),this.dispatchRouterNavigated(n)),this.reset())})}dispatchRouterRequest(r){this.dispatchRouterAction(Ir,{event:r})}dispatchRouterNavigation(r){let o=this.serializer.serialize(r.state);this.dispatchRouterAction(Tr,{routerState:o,event:new Tt(r.id,r.url,r.urlAfterRedirects,o)})}dispatchRouterCancel(r){this.dispatchRouterAction(Or,{storeState:this.storeState,event:r})}dispatchRouterError(r){this.dispatchRouterAction(br,{storeState:this.storeState,event:new It(r.id,r.url,`${r}`)})}dispatchRouterNavigated(r){let o=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(Cr,{event:r,routerState:o})}dispatchRouterAction(r,o){this.trigger=U.ROUTER;try{this.store.dispatch({type:r,payload:F(w({routerState:this.routerState},o),{event:this.config.routerState===Kt.Full?o.event:{id:o.event.id,url:o.event.url,urlAfterRedirects:o.event.urlAfterRedirects}})})}finally{this.trigger=U.NONE}}reset(){this.trigger=U.NONE,this.storeState=null,this.routerState=null}};t.\u0275fac=function(o){return new(o||t)(v(I),v(Z),v(St),v(it),v(wr),v(Ce))},t.\u0275prov=G({token:t,factory:t.\u0275fac});let e=t;return e})();function mo(e,t){return Rr(e)===Rr(t)}function Rr(e){return e?.length>0&&e[e.length-1]==="/"?e.substring(0,e.length-1):e}function Fr(e={}){return ot([{provide:vr,useValue:e},{provide:wr,useFactory:ho,deps:[vr]},{provide:St,useClass:e.serializer?e.serializer:e.routerState===Kt.Full?gt:mt},ce(()=>a(xr)),xr])}var go={access_token:null,current:null},Mr=st(go,Q(z.setCurrentUser,(e,{jwt:t})=>F(w({},e),{current:t})),Q(z.loginSuccess,(e,{data:t})=>F(w({},e),{access_token:t.access_token})));var Pr=Oe({source:"Actor",events:{"Load Actor Profile":L(),"Load Actor Profile Success":L(),"Load Actor Profile Failure":L()}});var So={current:null,error:null},Nr=st(So,Q(Pr.loadActorProfileFailure,(e,{error:t})=>F(w({},e),{error:t})));var kr={auth:Mr,actors:Nr,flashcards:Ke,models:$e,reviewSchedule:De,recentFlashcards:ze,knowledgeGraphStats:Ge},Ci=V()?[]:[];var Et=class e{http=a(Se);baseUrl="/api";login(t,i){return this.http.post(`${this.baseUrl}/auth/login`,{username:t,password:i})}static \u0275fac=function(i){return new(i||e)};static \u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})};var q=class extends Error{};q.prototype.name="InvalidTokenError";function Eo(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,i)=>{let r=i.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function yo(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Eo(t)}catch{return atob(t)}}function jr(e,t){if(typeof e!="string")throw new q("Invalid token specified: must be a string");t||(t={});let i=t.header===!0?0:1,r=e.split(".")[i];if(typeof r!="string")throw new q(`Invalid token specified: missing part #${i+1}`);let o;try{o=yo(r)}catch(n){throw new q(`Invalid token specified: invalid base64 for part #${i+1} (${n.message})`)}try{return JSON.parse(o)}catch(n){throw new q(`Invalid token specified: invalid json for part #${i+1} (${n.message})`)}}var Dr=x((e=a(R),t=a(Et))=>e.pipe(T(z.createSession),oe(({username:i,password:r})=>t.login(i,r).pipe(E(o=>z.loginSuccess({data:o})),$(o=>j(z.loginFailure({error:o})))))),{functional:!0}),Lr=x((e=a(R),t=a(Z),i=a(I))=>e.pipe(T(z.loginSuccess),E(({data:{access_token:r}})=>jr(r)),b(r=>[z.setCurrentUser({jwt:r})]),ae(()=>t.navigate(["/","dashboard"]))),{functional:!0,dispatch:!0});var Ur=x((e=a(R),t=a(K))=>e.pipe(T(h.loadFlashcardsPage),b(({page:i,limit:r})=>t.getFlashcards(i,r).pipe(E(o=>h.loadFlashcardsPageSuccess({flashcards:o.data,totalCount:o.total,page:i,limit:r})),$(o=>j(h.loadFlashcardsPageFailure({error:o}),h.setLoadingStatus({loading:!1}),h.setAllFlashcardsLoaded({loaded:!1})))))),{functional:!0}),zr=x((e=a(R),t=a(K))=>e.pipe(T(h.loadFlashcard),b(({activityPubId:i})=>t.getFlashcardById(i).pipe(E(r=>h.loadFlashcardSuccess({data:r})),$(r=>j(h.loadFlashcardFailure({error:r})))))),{functional:!0,dispatch:!0}),_r=x((e=a(R),t=a(I),i=a(K))=>e.pipe(T(h.loadFlashcardSuccess),b(r=>t.select(Be(r.data["edu:model"])).pipe(B(1),Yt(j(r)))),P(([r])=>!r),b(([r,{data:o}])=>i.getModelById(o["edu:model"]).pipe(E(n=>h.loadModelSuccess({data:n})),$(n=>(console.error(n),j(h.loadModelFailure({error:n}))))))),{functional:!0,dispatch:!0}),$r=x((e=a(R),t=a(K))=>e.pipe(T(h.createModel),b(({model:i})=>t.createModel(i)),E(({activityPubId:i})=>h.loadModel({activityPubId:i}))),{functional:!0,dispatch:!0}),Br=x((e=a(R),t=a(K))=>e.pipe(T(h.loadModels),b(()=>t.getAllModels()),E(i=>h.loadModelsSuccess({data:i}))),{functional:!0,dispatch:!0}),Gr=x((e=a(R),t=a(K))=>e.pipe(T(h.createFlashcard),b(({flashcard:i,username:r})=>t.createFlashcard(i,r)),E(({activityPubId:i})=>h.loadFlashcard({activityPubId:i}))),{functional:!0,dispatch:!0}),Hr=x((e=a(R),t=a(ct))=>e.pipe(T(h.addToReview),b(({flashcard:i})=>t.addToReview({flashcardActivityPubId:i.id}))),{functional:!0,dispatch:!1}),tn=x((e=a(R),t=a(I))=>e.pipe(T(h.nextPage),D(t.select(Y),t.select(Ve)),P(([,i,r])=>i<r),E(([,i])=>h.changePage({page:i+1}))),{functional:!0}),en=x((e=a(R),t=a(I))=>e.pipe(T(h.previousPage),D(t.select(Y)),P(([,i])=>i>1),E(([,i])=>h.changePage({page:i-1}))),{functional:!0}),rn=x((e=a(R),t=a(I))=>Wt([t.select(Y),t.select(Ct)]).pipe(re((i,r)=>JSON.stringify(i)===JSON.stringify(r)),E(([i,r])=>h.loadFlashcardsPage({page:i,limit:r}))),{functional:!0}),on=x((e=a(R),t=a(I))=>e.pipe(T(h.loadFlashcardsPageSuccess),D(t.select(qe),t.select(Je)),E(([,i,r])=>i.length>=r?h.setAllFlashcardsLoaded({loaded:!0}):h.setAllFlashcardsLoaded({loaded:!1}))),{functional:!0}),Kr=x((e=a(R),t=a(I))=>e.pipe(T(h.scrollReachedBottom),D(t.select(Ze),t.select(Xe),t.select(Y),t.select(Ct)),P(([,i,r])=>!i&&!r),E(([,,,i,r])=>h.loadFlashcardsPage({page:i+1,limit:r}))),{functional:!0});var qr=(e,t)=>a(I).select(at).pipe(B(1),Qt(r=>t(e.clone({setHeaders:r?{Authorization:`Bearer ${r}`}:{}}))));var Jr={providers:[ct,le(),me(),Ee(ye([qr])),Re(Ar,Ie({scrollPositionRestoration:"enabled"})),je(kr),Le({loginEffect:Dr,loginSuccessEffect:Lr,loadFlashcardsPageEffect:Ur,loadFlashcardEffect:zr,loadModelEffect:_r,loadModelsEffect:Br,createModelEffect:$r,createFlashcardEffect:Gr,addFlashcardToReviewEffect:Hr,loadReviewScheduleEffect:Ue,loadRecentFlashcards$:_e,loadKnowledgeGraphStats$:He,loadNextPageOnScrollEffect:Kr}),Fr(),yr({maxAge:25,logOnly:!V(),autoPause:!0,trace:!1,traceLimit:75})]};var yt=class e{title=ue("frontend");static \u0275fac=function(i){return new(i||e)};static \u0275cmp=pe({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){i&1&&he(0,"router-outlet")},dependencies:[xe],encapsulation:2})};ge(yt,Jr).catch(e=>console.error(e));
