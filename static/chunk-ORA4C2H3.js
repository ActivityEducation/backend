import{a as ae}from"./chunk-DXWBUUPU.js";import{a as fe}from"./chunk-D7RPFXXP.js";import{a as w}from"./chunk-NCQ6W5LN.js";import{$ as ee,B as H,C as F,Cd as B,Dd as ie,E as m,Fd as l,Gd as b,J as j,K as q,M as Q,O as W,R as N,U as Z,c as J,f as X,fa as u,ia as S,ja as R,ka as n,kd as a,la as te,ld as h,ma as re,n as v,s as d,sd as ne,td as se,u as p,xa as oe,xd as ce,zd as y}from"./chunk-VSLXTYK7.js";import{a as i,b as f}from"./chunk-2NFLSA4Y.js";var we={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},M="__@ngrx/effects_create__";function A(e,t={}){let o=t.functional?e:e(),r=i(i({},we),t);return Object.defineProperty(o,M,{value:r}),o}function ye(e){return Object.getOwnPropertyNames(e).filter(r=>e[r]&&e[r].hasOwnProperty(M)?e[r][M].hasOwnProperty("dispatch"):!1).map(r=>{let s=e[r][M];return i({propertyName:r},s)})}function be(e){return ye(e)}function le(e){return Object.getPrototypeOf(e)}function Ae(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function de(e){return typeof e=="function"}function xe(e){return e.filter(de)}function Ie(e,t,o){let r=le(e),E=!!r&&r.constructor.name!=="Object"?r.constructor.name:null,c=be(e).map(({propertyName:g,dispatch:ve,useEffectsErrorHandler:Fe})=>{let z=typeof e[g]=="function"?e[g]():e[g],Y=Fe?o(z,t):z;return ve===!1?Y.pipe(q()):Y.pipe(Z()).pipe(d(Re=>({effect:e[g],notification:Re,propertyName:g,sourceName:E,sourceInstance:e})))});return H(...c)}var je=10;function ue(e,t,o=je){return e.pipe(m(r=>(t&&t.handleError(r),o<=1?e:ue(e,t,o-1))))}var x=(()=>{let t=class t extends J{constructor(r){super(),r&&(this.source=r)}lift(r){let s=new t;return s.source=this,s.operator=r,s}};t.\u0275fac=function(s){return new(s||t)(R(ce))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function I(...e){return F(t=>e.some(o=>typeof o=="string"?o===t.type:o.type===t.type))}var at=new S("@ngrx/effects Internal Root Guard"),ft=new S("@ngrx/effects User Provided Effects"),lt=new S("@ngrx/effects Internal Root Effects"),dt=new S("@ngrx/effects Internal Root Effects Instances"),ut=new S("@ngrx/effects Internal Feature Effects"),pt=new S("@ngrx/effects Internal Feature Effects Instance Groups"),Me=new S("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>ue}),Oe="@ngrx/effects/init",Te=a(Oe);function Ge(e,t){if(e.notification.kind==="N"){let o=e.notification.value;!Ce(o)&&t.handleError(new Error(`Effect ${Ke(e)} dispatched an invalid action: ${De(o)}`))}}function Ce(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Ke({propertyName:e,sourceInstance:t,sourceName:o}){let r=typeof t[e]=="function";return!!o?`"${o}.${String(e)}${r?"()":""}"`:`"${String(e)}()"`}function De(e){try{return JSON.stringify(e)}catch{return e}}var $e="ngrxOnIdentifyEffects";function Ue(e){return V(e,$e)}var Pe="ngrxOnRunEffects";function ke(e){return V(e,Pe)}var Le="ngrxOnInitEffects";function He(e){return V(e,Le)}function V(e,t){return e&&t in e&&typeof e[t]=="function"}var pe=(()=>{let t=class t extends X{constructor(r,s){super(),this.errorHandler=r,this.effectsErrorHandler=s}addEffects(r){this.next(r)}toActions(){return this.pipe(N(r=>Ae(r)?le(r):r),p(r=>r.pipe(N(Ne))),p(r=>{let s=r.pipe(W(c=>Be(this.errorHandler,this.effectsErrorHandler)(c)),d(c=>(Ge(c,this.errorHandler),c.notification)),F(c=>c.kind==="N"&&c.value!=null),Q()),E=r.pipe(j(1),F(He),d(c=>c.ngrxOnInitEffects()));return H(s,E)}))}};t.\u0275fac=function(s){return new(s||t)(R(oe),R(Me))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ne(e){return Ue(e)?e.ngrxOnIdentifyEffects():""}function Be(e,t){return o=>{let r=Ie(o,e,t);return ke(o)?o.ngrxOnRunEffects(r):r}}var _e=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(r,s){this.effectSources=r,this.store=s,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(s){return new(s||t)(R(pe),R(y))},t.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ht(...e){let t=e.flat(),o=xe(t);return te([o,re(()=>{n(ne),n(se,{optional:!0});let r=n(_e),s=n(pe),E=!r.isStarted;E&&r.start();for(let c of t){let g=de(c)?n(c):c;s.addEffects(g)}E&&n(y).dispatch(Te())})])}var O=a("[Review Schedule] Load Review Schedule"),T=a("[Review Schedule] Load Review Schedule Success",h()),G=a("[Review Schedule] Load Review Schedule Failure",h());var C=class e{http=n(w);getReviewSchedule(){return this.http.get("/api/srs/schedule")}static \u0275fac=function(o){return new(o||e)};static \u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})};var It=A((e=n(x),t=n(C))=>e.pipe(I(O),p(()=>t.getReviewSchedule().pipe(d(o=>T({schedule:o})),m(o=>v(G({error:o})))))),{functional:!0});var Ve={schedule:[],error:null,loading:!1},Ot=b(Ve,l(O,e=>f(i({},e),{loading:!0})),l(T,(e,{schedule:t})=>f(i({},e),{schedule:t,loading:!1})),l(G,(e,{error:t})=>f(i({},e),{error:t,loading:!1})));var me=ie("reviewSchedule"),Kt=B(me,e=>e.schedule),Dt=B(me,e=>e.loading);var Se=a("[Recent Flashcards] Load Recent Flashcards"),K=a("[Recent Flashcards] Load Recent Flashcards Success",h()),D=a("[Recent Flashcards] Load Recent Flashcards Failure",h());var $=class e{http=n(w);baseUrl="/api";getFlashcardById(t){return this.http.get(t)}getModelById(t){return this.http.get(t)}createModel(t){return this.http.post(`${this.baseUrl}/edu/flashcard-models`,t)}createFlashcard(t,o){return this.http.post(`${this.baseUrl}/edu/flashcards/${o}`,t)}getAllModels(){return this.http.get(`${this.baseUrl}/edu/flashcard-models`)}getFlashcards(t,o){return this.http.get(`${this.baseUrl}/edu/flashcards?page=${t}&limit=${o}`)}addFlashcardToReview(t){return this.http.post(`${this.baseUrl}/srs/review`,{flashcardActivityPubId:t.id,rating:1})}static \u0275fac=function(o){return new(o||e)};static \u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})};var tr=A((e=n(x),t=n($),o=n(y))=>e.pipe(I(fe.setCurrentUser),ee(()=>o.select(ae).pipe(j(1))),F(r=>!!r),p(()=>t.getFlashcards(1,5).pipe(d(r=>K({flashcards:r.data})),m(r=>v(D({error:r})))))),{functional:!0});var U=a("[Knowledge Graph Stats] Load Knowledge Graph Stats"),P=a("[Knowledge Graph Stats] Load Knowledge Graph Stats Success",h()),k=a("[Knowledge Graph Stats] Load Knowledge Graph Stats Failure",h());var L=class e{http=n(w);getGraph(){return this.http.get("/api/knowledge-graph/graph")}static \u0275fac=function(o){return new(o||e)};static \u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"})};var pr=A((e=n(x),t=n(L))=>e.pipe(I(U),p(()=>t.getGraph().pipe(d(o=>P({stats:o})),m(o=>v(k({error:o})))))),{functional:!0});var ze={flashcards:[],error:null,loading:!1},Sr=b(ze,l(Se,e=>f(i({},e),{loading:!0})),l(K,(e,{flashcards:t})=>f(i({},e),{flashcards:t,loading:!1})),l(D,(e,{error:t})=>f(i({},e),{error:t,loading:!1})));var Ye={stats:null,error:null,loading:!1},Fr=b(Ye,l(U,e=>f(i({},e),{loading:!0})),l(P,(e,{stats:t})=>f(i({},e),{stats:t,loading:!1})),l(k,(e,{error:t})=>f(i({},e),{error:t,loading:!1})));export{O as a,Ot as b,A as c,x as d,I as e,ht as f,It as g,Kt as h,Dt as i,Se as j,Sr as k,$ as l,tr as m,U as n,Fr as o,pr as p};
